/**
 * å‘çŽ°é¡µ
 * åŠŸèƒ½ï¼šå±•ç¤ºæœ‹å‹åœˆã€æ‰«ä¸€æ‰«ã€æ‘‡ä¸€æ‘‡ç­‰åŠŸèƒ½å…¥å£
 */
import router from '@ohos.router'

@Entry
@Component
struct DiscoverPage {
  @State currentTab: number = 2 // å½“å‰é€‰ä¸­çš„Tabï¼Œ2=å‘çŽ°

  // åŠŸèƒ½é¡¹ç»„ä»¶
  @Builder
  FeatureItem(icon: string, title: string, showArrow: boolean = true, url?: string) {
    Row() {
      Text(icon)
        .width(28)
        .height(28)
        .fontSize(24)
        .textAlign(TextAlign.Center)
        .margin({ right: 12 })

      Text(title)
        .fontSize(16)
        .layoutWeight(1)

      if (showArrow) {
        Image($r('sys.media.ohos_ic_public_arrow_right'))
          .width(20)
          .height(20)
          .fillColor('#CCCCCC')
      }
    }
    .width('100%')
    .height(56)
    .padding({ left: 16, right: 16 })
    .backgroundColor('#FFFFFF')
    .onClick(() => {
      if (url) {
        router.pushUrl({ url: url })
      }
    })
  }

  build() {
    Column() {
      // é¡¶éƒ¨æ ‡é¢˜
      Row() {
        Text('å‘çŽ°')
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
      }
      .width('100%')
      .height(56)
      .padding({ left: 16, right: 16 })
      .backgroundColor('#FFFFFF')

      // åŠŸèƒ½åˆ—è¡¨
      List() {
        // æœ‹å‹åœˆ
        ListItem() {
          Column() {
            this.FeatureItem('ðŸ“·', 'æœ‹å‹åœˆ', true, 'pages/MomentsDetailPage')
          }
          .margin({ top: 8 })
        }

        // æ‰«ä¸€æ‰«ã€æ‘‡ä¸€æ‘‡
        ListItem() {
          Column() {
            this.FeatureItem('ðŸ“·', 'æ‰«ä¸€æ‰«', true, 'pages/ScanPage')
            Divider().strokeWidth(1).color('#EDEDED')
            this.FeatureItem('ðŸ“±', 'æ‘‡ä¸€æ‘‡', true, 'pages/ShakePage')
          }
          .margin({ top: 8 })
        }

        // çœ‹ä¸€çœ‹ã€æœä¸€æœ
        ListItem() {
          Column() {
            this.FeatureItem('ðŸ‘ï¸', 'çœ‹ä¸€çœ‹', true, 'pages/LookPage')
            Divider().strokeWidth(1).color('#EDEDED')
            this.FeatureItem('ðŸ”', 'æœä¸€æœ', true, 'pages/SearchDiscoverPage')
          }
          .margin({ top: 8 })
        }

        // é™„è¿‘ã€è´­ç‰©
        ListItem() {
          Column() {
            this.FeatureItem('ðŸ“', 'é™„è¿‘', true, 'pages/NearbyPage')
            Divider().strokeWidth(1).color('#EDEDED')
            this.FeatureItem('ðŸ›’', 'è´­ç‰©', true, 'pages/ShoppingPage')
          }
          .margin({ top: 8 })
        }

        // å°ç¨‹åºã€æ¸¸æˆ
        ListItem() {
          Column() {
            this.FeatureItem('ðŸ“¦', 'å°ç¨‹åº', true, 'pages/MiniProgramPage')
            Divider().strokeWidth(1).color('#EDEDED')
            this.FeatureItem('ðŸŽ®', 'æ¸¸æˆ', true, 'pages/GamePage')
          }
          .margin({ top: 8, bottom: 8 })
        }
      }
      .width('100%')
      .layoutWeight(1)
      .backgroundColor('#EDEDED')

      // åº•éƒ¨å¯¼èˆªæ 
      Row() {
        Column() {
          Image($r('sys.media.ohos_ic_public_email'))
            .width(24)
            .height(24)
            .fillColor(this.currentTab === 0 ? '#07C160' : '#999999')
          Text('æ¶ˆæ¯')
            .fontSize(12)
            .fontColor(this.currentTab === 0 ? '#07C160' : '#999999')
            .margin({ top: 4 })
        }
        .layoutWeight(1)
        .onClick(() => {
          this.currentTab = 0
          router.pushUrl({ url: 'pages/MessageListPage' })
        })

        Column() {
          Image($r('sys.media.ohos_ic_public_phone'))
            .width(24)
            .height(24)
            .fillColor(this.currentTab === 1 ? '#07C160' : '#999999')
          Text('é€šè®¯å½•')
            .fontSize(12)
            .fontColor(this.currentTab === 1 ? '#07C160' : '#999999')
            .margin({ top: 4 })
        }
        .layoutWeight(1)
        .onClick(() => {
          this.currentTab = 1
          router.pushUrl({ url: 'pages/ContactsPage' })
        })

        Column() {
          Image($r('sys.media.ohos_ic_public_scan'))
            .width(24)
            .height(24)
            .fillColor(this.currentTab === 2 ? '#07C160' : '#999999')
          Text('å‘çŽ°')
            .fontSize(12)
            .fontColor(this.currentTab === 2 ? '#07C160' : '#999999')
            .margin({ top: 4 })
        }
        .layoutWeight(1)
        .onClick(() => {
          this.currentTab = 2
        })

        Column() {
          Image($r('sys.media.ohos_ic_public_device_phone'))
            .width(24)
            .height(24)
            .fillColor(this.currentTab === 3 ? '#07C160' : '#999999')
          Text('æˆ‘')
            .fontSize(12)
            .fontColor(this.currentTab === 3 ? '#07C160' : '#999999')
            .margin({ top: 4 })
        }
        .layoutWeight(1)
        .onClick(() => {
          this.currentTab = 3
          router.pushUrl({ url: 'pages/ProfilePage' })
        })
      }
      .width('100%')
      .height(60)
      .backgroundColor('#FFFFFF')
      .border({ width: { top: 1 }, color: '#EDEDED' })
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#EDEDED')
  }
}
