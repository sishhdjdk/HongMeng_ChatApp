/**
 * ä¸ªäººä¸­å¿ƒé¡µ
 * åŠŸèƒ½ï¼šæ˜¾ç¤ºä¸ªäººä¿¡æ¯ã€åŠŸèƒ½å…¥å£ã€è®¾ç½®ç­‰
 */
import router from '@ohos.router'

@Entry
@Component
struct ProfilePage {
  @State currentTab: number = 3 // å½“å‰é€‰ä¸­çš„Tabï¼Œ3=æˆ‘
  @State username: string = 'å¾®ä¿¡ç”¨æˆ·'
  @State wechatId: string = 'wxid_123456'

  // åŠŸèƒ½é¡¹ç»„ä»¶
  @Builder
  MenuItem(icon: string, title: string, url?: string, showBadge: boolean = false) {
    Row() {
      Text(icon)
        .width(24)
        .height(24)
        .fontSize(20)
        .textAlign(TextAlign.Center)
        .margin({ right: 12 })

      Text(title)
        .fontSize(16)
        .layoutWeight(1)

      if (showBadge) {
        Text('New')
          .fontSize(12)
          .fontColor('#FFFFFF')
          .backgroundColor('#FF3B30')
          .borderRadius(4)
          .padding({ left: 6, right: 6, top: 2, bottom: 2 })
          .margin({ right: 8 })
      }

      Image($r('sys.media.ohos_ic_public_arrow_right'))
        .width(20)
        .height(20)
        .fillColor('#CCCCCC')
    }
    .width('100%')
    .height(56)
    .padding({ left: 16, right: 16 })
    .backgroundColor('#FFFFFF')
    .onClick(() => {
      if (url) {
        router.pushUrl({ url: url })
      }
    })
  }

  build() {
    Column() {
      // é¡¶éƒ¨ä¸ªäººä¿¡æ¯å¡ç‰‡
      Row() {
        // å¤´åƒ - ä½¿ç”¨æ–‡æœ¬å ä½ç¬¦
        Text(this.username.substring(0, 1))
          .width(70)
          .height(70)
          .borderRadius(8)
          .backgroundColor('#07C160')
          .fontColor('#FFFFFF')
          .fontSize(32)
          .textAlign(TextAlign.Center)
          .margin({ right: 16 })

        Column() {
          // æ˜µç§°
          Text(this.username)
            .fontSize(22)
            .fontWeight(FontWeight.Bold)
            .margin({ bottom: 8 })

          // å¾®ä¿¡å·
          Row() {
            Text(`å¾®ä¿¡å·ï¼š${this.wechatId}`)
              .fontSize(14)
              .fontColor('#666666')

            Image($r('sys.media.ohos_ic_public_copy'))
              .width(16)
              .height(16)
              .fillColor('#999999')
              .margin({ left: 8 })
          }
        }
        .alignItems(HorizontalAlign.Start)
        .layoutWeight(1)

        // äºŒç»´ç 
        Text('ðŸ“±')
          .fontSize(24)
          .margin({ left: 8 })
      }
      .width('100%')
      .padding(20)
      .backgroundColor('#FFFFFF')
      .onClick(() => {
        router.pushUrl({ url: 'pages/EditProfilePage' })
      })

      // åŠŸèƒ½åˆ—è¡¨
      List() {
        // æœåŠ¡
        ListItem() {
          Column() {
            this.MenuItem('ðŸ’¼', 'æœåŠ¡', 'pages/ServicePage')
          }
          .margin({ top: 8 })
        }

        // æ”¶è—ã€æœ‹å‹åœˆã€å¡åŒ…ã€è¡¨æƒ…
        ListItem() {
          Column() {
            this.MenuItem('â­', 'æ”¶è—', 'pages/FavoritePage')
            Divider().strokeWidth(1).color('#EDEDED')
            this.MenuItem('ðŸ“·', 'æœ‹å‹åœˆ', 'pages/MomentsDetailPage')
            Divider().strokeWidth(1).color('#EDEDED')
            this.MenuItem('ðŸ’³', 'å¡åŒ…', 'pages/CardsPage')
            Divider().strokeWidth(1).color('#EDEDED')
            this.MenuItem('ðŸ˜Š', 'è¡¨æƒ…', 'pages/EmojiPage')
          }
          .margin({ top: 8 })
        }

        // è®¾ç½®
        ListItem() {
          Column() {
            this.MenuItem('âš™ï¸', 'è®¾ç½®', 'pages/SettingsPage')
          }
          .margin({ top: 8, bottom: 8 })
        }
      }
      .width('100%')
      .layoutWeight(1)
      .backgroundColor('#EDEDED')

      // åº•éƒ¨å¯¼èˆªæ 
      Row() {
        Column() {
          Image($r('sys.media.ohos_ic_public_email'))
            .width(24)
            .height(24)
            .fillColor(this.currentTab === 0 ? '#07C160' : '#999999')
          Text('æ¶ˆæ¯')
            .fontSize(12)
            .fontColor(this.currentTab === 0 ? '#07C160' : '#999999')
            .margin({ top: 4 })
        }
        .layoutWeight(1)
        .onClick(() => {
          this.currentTab = 0
          router.pushUrl({ url: 'pages/MessageListPage' })
        })

        Column() {
          Image($r('sys.media.ohos_ic_public_phone'))
            .width(24)
            .height(24)
            .fillColor(this.currentTab === 1 ? '#07C160' : '#999999')
          Text('é€šè®¯å½•')
            .fontSize(12)
            .fontColor(this.currentTab === 1 ? '#07C160' : '#999999')
            .margin({ top: 4 })
        }
        .layoutWeight(1)
        .onClick(() => {
          this.currentTab = 1
          router.pushUrl({ url: 'pages/ContactsPage' })
        })

        Column() {
          Image($r('sys.media.ohos_ic_public_scan'))
            .width(24)
            .height(24)
            .fillColor(this.currentTab === 2 ? '#07C160' : '#999999')
          Text('å‘çŽ°')
            .fontSize(12)
            .fontColor(this.currentTab === 2 ? '#07C160' : '#999999')
            .margin({ top: 4 })
        }
        .layoutWeight(1)
        .onClick(() => {
          this.currentTab = 2
          router.pushUrl({ url: 'pages/DiscoverPage' })
        })

        Column() {
          Image($r('sys.media.ohos_ic_public_device_phone'))
            .width(24)
            .height(24)
            .fillColor(this.currentTab === 3 ? '#07C160' : '#999999')
          Text('æˆ‘')
            .fontSize(12)
            .fontColor(this.currentTab === 3 ? '#07C160' : '#999999')
            .margin({ top: 4 })
        }
        .layoutWeight(1)
        .onClick(() => {
          this.currentTab = 3
        })
      }
      .width('100%')
      .height(60)
      .backgroundColor('#FFFFFF')
      .border({ width: { top: 1 }, color: '#EDEDED' })
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#EDEDED')
  }
}
